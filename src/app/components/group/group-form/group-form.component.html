<div class="container py-4" style="max-width: 600px;">
    <div *ngIf="mensajes" class="alert alert-success" role="alert">
        {{ mensajes }}
    </div>
    <div *ngIf="errores" class="alert alert-danger" role="alert">
        {{ errores }}
    </div>

  <form id="editGroupForm" [formGroup]="groupForm" class="p-4 border rounded mx-auto" style="max-width: 600px;">
    <h3 class="mb-4 text-center" *ngIf="group!=undefined && group!=null">Edit group</h3>
    <h3 class="mb-4 text-center" *ngIf="groupId=='-1'">Create new group</h3>

    <div class="mb-3">
      <label for="groupTitle" class="form-label">Title</label>
      <input type="text" formControlName="title" class="form-control" id="groupTitle" placeholder="Nombre del grupo" required [ngClass]="{'is-valid': this.groupForm.get('title')?.valid && this.groupForm.get('title')?.touched,'is-invalid':this.groupForm.get('title')?.invalid && this.groupForm.get('title')?.touched}" />
      <div class="invalid-feedback">
        <small>You must provide a title.</small>
      </div>
    </div>

    <div class="mb-3">
      <label for="groupDescription" class="form-label">Description</label>
      <textarea class="form-control" formControlName="description" id="groupDescription" rows="3"
        placeholder="Descripción del grupo" 
                        required [ngClass]="{'is-valid': this.groupForm.get('description')?.valid && this.groupForm.get('description')?.touched,'is-invalid':this.groupForm.get('description')?.invalid && this.groupForm.get('description')?.touched}">

      </textarea>
      <div class="invalid-feedback">
        <small>You must provide a description.</small>
      </div>
    </div>

    <div class="mb-3">
      <label for="groupVisibility" class="form-label">Visibility</label>
      <select class="form-select" formControlName="visibility" id="groupVisibility" 
          required [ngClass]="{'is-valid': this.groupForm.get('visibility')?.valid && this.groupForm.get('visibility')?.touched,'is-invalid':this.groupForm.get('visibility')?.invalid && this.groupForm.get('visibility')?.touched}">

        <option value="PUBLIC">Public</option>
        <option value="PRIVATE">Private</option>
      </select>
      <div class="invalid-feedback">
        <small>You must provide a visibility.</small>
      </div>
    </div>

    <div class="mb-3">
      <label for="groupIcon" class="form-label">Icon URL</label>
      <input type="url" formControlName="icon" class="form-control" id="groupIcon"
        placeholder="https://example.com/icon.png" 
                  required [ngClass]="{'is-valid': this.groupForm.get('icon')?.valid && this.groupForm.get('icon')?.touched,'is-invalid':this.groupForm.get('icon')?.invalid && this.groupForm.get('icon')?.touched}" />

      <div class="form-text">Insert a valid image URL.</div>
      <div class="invalid-feedback">
        <small>You must provide a url.</small>
      </div>
    </div>

    <div class="mb-3 text-center">
      <img id="iconPreview" src="" alt="Previsualización del ícono" class="img-fluid"
        style="max-height: 80px; display: none; margin: auto;">
    </div>

    <div class="d-flex justify-content-between flex-column flex-sm-row gap-2">
      <button type="button" class="btn btn-danger w-100 w-sm-auto" *ngIf="groupId != '-1'"
        (click)="borrar()">Delete</button>
      <button type="button" class="btn btn-secondary w-100 w-sm-auto" (click)="cancelarEdicion()">Cancel</button>
      <button type="submit" class="btn btn-primary w-100 w-sm-auto" (click)="guardar()">Save changes</button>
    </div>
  </form>
</div>